(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(5),o=a.n(i),l=(a(15),a(9)),c=a(1),s=a(6),u=a.n(s);var m=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{className:"header__logo",alt:"logo",src:u.a}))};var d=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Holger Kraus"))},f=r.a.createContext({name:"Holger",about:"nothing"});var _=function(e){var t=r.a.useContext(f),a=e.card.owner._id===t._id,n="element__remove ".concat(a?"":"element__remove_hide"),i=e.card.likes.some((function(e){return e._id===t._id})),o="element__like-button ".concat(i?"element__like-button_liked":""),l=e.card.likes.length;return r.a.createElement("li",{className:"element","data-id":"#"},r.a.createElement("a",{className:"element__link",style:{backgroundImage:"url(".concat(e.card.link,")")},href:"#",onClick:function(){e.onCardClick(e.card)}},r.a.createElement("button",{className:n,onClick:function(t){t.stopPropagation(),t.preventDefault(),e.onCardDelete(e.card)}}),r.a.createElement("div",{className:"element__title-container"},r.a.createElement("h2",{className:"element__title"},e.card.name),r.a.createElement("div",{className:"element__like"},r.a.createElement("button",{className:o,onClick:function(t){t.stopPropagation(),t.preventDefault(),e.onCardLike(e.card)}}),r.a.createElement("span",{className:"element__like-count"},l)))))};var v=function(e){var t=r.a.useContext(f);return r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("button",{className:"profile__avatar",onClick:e.onEditAvatar},r.a.createElement("img",{className:"profile__avatar-image",alt:"profile avatar",src:t.avatar}),r.a.createElement("div",{className:"profile__avatar-edit"})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h1",{className:"profile__name"},t.name),r.a.createElement("button",{className:"profile__edit-button",onClick:e.onEditProfile}),r.a.createElement("p",{className:"profile__about-me"},t.about)),r.a.createElement("button",{className:"profile__add-button",onClick:e.onAddPlace})),r.a.createElement("section",{className:"elements"},r.a.createElement("ul",{className:"elements__list"},e.cards.map((function(t,a){return r.a.createElement(_,{key:a,card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})})))))};var p=function(e){var t=e.isOpen?"overlay_opened":"",a=e.isSubmitActive?"":"form__save_inactive";return r.a.createElement("section",{className:"overlay overlay_".concat(e.name," ").concat(t)},r.a.createElement("div",{className:"overlay__container overlay__container_".concat(e.name)},r.a.createElement("form",{action:"#",className:"form",noValidate:!0,onSubmit:e.onSubmit},r.a.createElement("h2",{className:"form__title"},e.title),e.children,r.a.createElement("button",{type:"submit",className:"form__save ".concat(a)},e.submitText)),r.a.createElement("button",{className:"overlay__close-button",onClick:e.onClose})))};var b=function(e){var t=r.a.useContext(f),a=Object(n.useState)(""),i=Object(c.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(null),u=Object(c.a)(s,2),m=u[0],d=u[1],_=Object(n.useState)(""),v=Object(c.a)(_,2),b=v[0],h=v[1],g=Object(n.useState)(""),E=Object(c.a)(g,2),k=E[0],C=E[1];r.a.useEffect((function(){l(t.name),h(t.about)}),[t]);var O=m?"form__field-error_active":"",N=k?"form__field-error_active":"",y=!O&&!N;return r.a.createElement(p,{name:"profile",title:"Edit profile",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:b})},isSubmitActive:y,submitText:e.submitText},r.a.createElement("label",{className:"form__label form__label_title",htmlFor:"profile-name-input"},r.a.createElement("input",{id:"profile-name-input",type:"text",name:"name",className:"form__field form__field_title",minLength:"2",maxLength:"40",pattern:"[a-zA-Z-\\s]*",value:o,onChange:function(e){l(e.target.value)},onInput:function(e){e.target.validity.valid?d(null):d(e.target.validationMessage)},required:!0}),r.a.createElement("span",{id:"profile-name-input-error",className:"form__field-error ".concat(O)},m)),r.a.createElement("label",{htmlFor:"profile-aboutme-input",className:"form__label form__label_detail"},r.a.createElement("input",{id:"profile-aboutme-input",type:"text",name:"aboutme",className:"form__field form__field_detail",minLength:"2",maxLength:"200",value:b,onChange:function(e){h(e.target.value)},onInput:function(e){e.target.validity.valid?C(null):C(e.target.validationMessage)},required:!0}),r.a.createElement("span",{id:"profile-aboutme-input-error",className:"form__field-error ".concat(N)},k)))};var h=function(e){var t=r.a.useRef(),a=Object(n.useState)(null),i=Object(c.a)(a,2),o=i[0],l=i[1],s=o?"form__field-error_active":"",u=!s;return r.a.createElement(p,{name:"avatarpic",title:"Change Userpic",isSubmitActive:u,isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})},submitText:e.submitText},r.a.createElement("label",{className:"form__label form__label_title",htmlFor:"avatarpic-link-input"},r.a.createElement("input",{ref:t,id:"avatarpic-link-input",type:"url",name:"avatarpic-link",className:"form__field form__field_title",placeholder:"Image Link",onInput:function(e){e.target.validity.valid?l(null):l(e.target.validationMessage)},required:!0}),r.a.createElement("span",{id:"avatarpic-link-input-error",className:"form__field-error ".concat(s)},o)))};var g=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),i=a[0],o=a[1],l=Object(n.useState)(null),s=Object(c.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(""),f=Object(c.a)(d,2),_=f[0],v=f[1],b=Object(n.useState)(null),h=Object(c.a)(b,2),g=h[0],E=h[1],k=u?"form__field-error_active":"",C=g?"form__field-error_active":"",O=!k&&!C;return r.a.createElement(p,{name:"place",title:"New place",isOpen:e.isOpen,isSubmitActive:O,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({title:i,link:_})},submitText:e.submitText},r.a.createElement("label",{className:"form__label form__label_title",htmlFor:"place-title-input"},r.a.createElement("input",{id:"place-title-input",type:"text",name:"image-title",className:"form__field form__field_title",placeholder:"Title",minLength:"2",maxLength:"40",value:i,onChange:function(e){o(e.target.value)},onInput:function(e){e.target.validity.valid?m(null):m(e.target.validationMessage)},required:!0}),r.a.createElement("span",{id:"place-title-input-error",className:"form__field-error ".concat(k)},u)),r.a.createElement("label",{className:"form__label form__label_detail",htmlFor:"place-link-input"},r.a.createElement("input",{id:"place-link-input",type:"url",name:"image-link",className:"form__field form__field_detail",placeholder:"Image Link",value:_,onChange:function(e){v(e.target.value)},onInput:function(e){e.target.validity.valid?E(null):E(e.target.validationMessage)},required:!0}),r.a.createElement("span",{id:"place-link-input-error",className:"form__field-error ".concat(C)},g)))};var E=function(e){return r.a.createElement("section",{className:"overlay overlay_image ".concat(e.card?"overlay_opened":"")},r.a.createElement("div",{className:"overlay__container overlay__container_image"},r.a.createElement("img",{className:"image",alt:"image title",src:e.card&&e.card.link}),r.a.createElement("p",{className:"image__title"},e.card&&e.card.name),r.a.createElement("button",{className:"overlay__close-button",onClick:e.onClose})))};var k=function(e){return r.a.createElement(p,{name:"confirmation",title:"Are you sure?",isOpen:e.isOpen,isSubmitActive:!0,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onConfirmation(e.confirmedObject)},submitText:e.submitText})},C=a(7),O=a(8),N=new(function(){function e(t){Object(C.a)(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}return Object(O.a)(e,[{key:"getProfile",value:function(){var e=this.baseUrl.concat("/users/me");return this._getResource(e)}},{key:"updateProfile",value:function(e,t){var a=this.baseUrl.concat("/users/me"),n=JSON.stringify({name:e,about:t});return this._sendRequestWithBody(a,n,"PATCH")}},{key:"updateProfilePicture",value:function(e){var t=this.baseUrl.concat("/users/me/avatar"),a=JSON.stringify({avatar:e});return this._sendRequestWithBody(t,a,"PATCH")}},{key:"getInitialCards",value:function(){var e=this.baseUrl.concat("/cards");return this._getResource(e)}},{key:"addCard",value:function(e,t){var a=this.baseUrl.concat("/cards"),n=JSON.stringify({name:e,link:t});return this._sendRequestWithBody(a,n,"POST")}},{key:"changeLikeCardStatus",value:function(e,t){return t?this._addLike(e):this._deleteLike(e)}},{key:"deleteCard",value:function(e){var t=this.baseUrl.concat("/cards/").concat(e);return this._sendRequestWithoutBody(t,"DELETE")}},{key:"_addLike",value:function(e){var t=this.baseUrl.concat("/cards/likes/").concat(e);return this._sendRequestWithoutBody(t,"PUT")}},{key:"_deleteLike",value:function(e){var t=this.baseUrl.concat("/cards/likes/").concat(e);return this._sendRequestWithoutBody(t,"DELETE")}},{key:"_getResource",value:function(e){return fetch(e,{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"_sendRequestWithoutBody",value:function(e,t){return fetch(e,{method:t,headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"_sendRequestWithBody",value:function(e,t,a){return fetch(e,{method:a,headers:this.headers,body:t}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-1",headers:{Authorization:"cf0daf24-499f-4e4d-a691-bc6825f65b5e","Content-Type":"application/json"}});var y=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(!1),s=Object(c.a)(o,2),u=s[0],_=s[1],p=Object(n.useState)(!1),C=Object(c.a)(p,2),O=C[0],y=C[1],j=Object(n.useState)(!1),S=Object(c.a)(j,2),x=S[0],P=S[1],T=Object(n.useState)(null),L=Object(c.a)(T,2),U=L[0],A=L[1],D=Object(n.useState)(null),q=Object(c.a)(D,2),w=q[0],R=q[1],I=Object(n.useState)({}),B=Object(c.a)(I,2),W=B[0],M=B[1],F=Object(n.useState)([]),J=Object(c.a)(F,2),H=J[0],z=J[1],K=Object(n.useState)(""),V=Object(c.a)(K,2),Z=V[0],$=V[1];function G(){A(null),y(!1),i(!1),_(!1)}return r.a.useEffect((function(){N.getProfile().then((function(e){M(e)})).catch((function(e){console.log(e)}))}),[]),r.a.useEffect((function(){N.getInitialCards().then((function(e){var t=[];e.forEach((function(e){t.push(e)})),z(t)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("div",{className:"page"},r.a.createElement(f.Provider,{value:W},r.a.createElement(m,null),r.a.createElement(v,{cards:H,onEditProfile:function(){$("Save"),i(!0)},onAddPlace:function(){$("Create"),_(!0)},onEditAvatar:function(){$("Save"),y(!0)},onCardClick:function(e){A(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===W._id}));N.changeLikeCardStatus(e._id,!t).then((function(t){var a=H.map((function(a){return a._id===e._id?t:a}));z(a)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){R(e),$("Delete"),P(!0)}}),r.a.createElement(d,null),r.a.createElement(b,{isOpen:a,submitText:Z,onClose:G,onUpdateUser:function(e){var t=e.name,a=e.about;$("Saving..."),N.updateProfile(t,a).then((function(e){M(e),i(!1)})).catch((function(e){console.log(e)}))}}),r.a.createElement(g,{isOpen:u,submitText:Z,onClose:G,onAddPlace:function(e){var t=e.title,a=e.link;$("Creating..."),N.addCard(t,a).then((function(e){z([].concat(Object(l.a)(H),[e])),_(!1)})).catch((function(e){console.log(e)}))}}),r.a.createElement(h,{isOpen:O,submitText:Z,onClose:G,onUpdateAvatar:function(e){var t=e.avatar;$("Saving..."),N.updateProfilePicture(t).then((function(e){M(e),y(!1)})).catch((function(e){console.log(e)}))}}),r.a.createElement(k,{isOpen:x,onClose:G,onConfirmation:function(e){$("Deleting..."),N.deleteCard(e._id).then((function(){var t=H.filter((function(t){return t._id!==e._id}));z(t),P(!1)})).catch((function(e){console.log(e)}))},confirmedObject:w,submitText:Z}),r.a.createElement(E,{card:U,onClose:G})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports=a.p+"static/media/logo-white.8f7611ae.svg"}},[[10,1,2]]]);
//# sourceMappingURL=main.68a9f7d6.chunk.js.map